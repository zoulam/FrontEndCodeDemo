## 1、

七层或五层或四层

|          | 描述                                                         | 协议                                |      |      |
| -------- | ------------------------------------------------------------ | ----------------------------------- | ---- | ---- |
| 应用     | （Application Layer）**提供用户接口、实现各种服务**          | **http**、ftp、smtp、telnet、pop3、 |      |      |
| 表示     | Presentation Layer：**数据格式处理、数据编码、压缩和解压缩、数据加密解密** |                                     |      |      |
| 会话     | 会话层（Session Layer） **会话管理、会话流量控制、寻址、出错控制** |                                     |      |      |
| 传输     | 传输层（Transport Layer）**传输连接管理、处理传输出错、监控服务质量。** | **TCP、UDP、socket**                |      |      |
| 网络     | （Network Layer）**寻址、交换、路由算法、连接服务**`通信子网最高一层，也是最复杂的一层。` |                                     |      |      |
| 数据链路 | （Data Link Layer）负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成[信息框](https://zh.wikipedia.org/wiki/資訊框)（Data Frame）。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。**分为两个子层**：逻辑链路控制（logical link control，LLC）子层和介质访问控制（Media access control，MAC）子层。 |                                     |      |      |
| 物理     | （Physical Layer）在局部局域网上传送数据帧（Data Frame），它负责管理电脑通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机接口卡等。 |                                     |      |      |

![图示出自美团](https://zoulam-pic-repo.oss-cn-beijing.aliyuncs.com/img/0_1325744597WM32.gif)

小问题：

​	上层依赖下层，下层伪上层提供服务

## 2、

[详细文章](https://zhuanlan.zhihu.com/p/53374516)

> ​	TCP提供了一种可靠、面向连接、字节流（最小单位是字节，内容格式由应用层绝对）、传输层的**双工**服务，采用三次握手建立一个连接。采用4次挥手来关闭一个连接。
>
> ​	同步序列编号SYN（Synchronize Sequence Numbers）
>
> ​	确认字符ACK (Acknowledge character）
>
> ​	终止序列 FIN （Finall）

### 报文结构



即，为什么不能多，为什么不能少

少：无法保证连接，多：性能损耗过多

### 三次握手

|        |                |                           | 验证                                                         |
| ------ | -------------- | ------------------------- | ------------------------------------------------------------ |
| 第一次 | client=>server | [SYN] Seq=0；             | **服务端知道**：client有发送能力，server有接收能力           |
| 第二次 | server=>client | [SYN, ACK] Seq=0, Ack=1； | **客户端知道**两者接收和发送能力正常                         |
| 第三次 | client=>server | [ACK] Seq=1, Ack=1        | **服务端知道**两者的接收和发送能力正常 （前面无法验证自己的发送和对方的接收功能正确） |

### 四次挥手

> 当有一方想要断开连接（server和client都可以，下面以client断开为例）


|        |                | 描述           | 效果                                                         |
| ------ | -------------- | -------------- | ------------------------------------------------------------ |
| 第一次 | client=>server | 我要断开连接了 | 对方知道了                                                   |
| 第二次 | server=>client | ACK            | 我对你断开连接了                                             |
| 第三次 | client=>server | FIN            | 还是能发送数据，发送完全部数据之后之后用FIN关闭连接。**此时还能返回重新连接。** |
| 第四次 | server=>client | ACK            | 好，我知道你关闭了                                           |

### TCP与UDP

|          | TCP（Transmission Control Protocol，传输层控制协议） | UDP（User Data Protocol，用户数据报协议） |
| -------- | ---------------------------------------------------- | ----------------------------------------- |
|          | 面向连接（可靠）                                     | 面向报文                                  |
| 效率     | 较低                                                 | 较低                                      |
| 报文结构 | 复杂（最小20byte）                                   | 轻量（最小8byte）                         |
| 模式     | 流模式                                               | 数据报模式                                |
| 数据顺序 | 保证                                                 | 无法保证                                  |
| 场景     | 私密数据、可靠性要求高的场景                         | 网络直播等需要实时传输，允许丢包的场景    |

## 3、

## 4、

## 5、

`connection:keep-alive`

建立连接需要消耗计算机资源，http1.1之后默认是长连接

## 6、

![报文结构](https://zoulam-pic-repo.oss-cn-beijing.aliyuncs.com/img/image-20201001194555405.png)

## 7、

|       |                                              |
| ----- | -------------------------------------------- |
| `1xx` | 收到请求继续处理（**处理中**）               |
| `2xx` | 操作**成功**收到，分析、接受，并成功返回响应 |
| `3xx` | **重定向**                                   |
| `4xx` | **客户端**的请求错误                         |
| `5xx` | **服务端**出错                               |

100——客户必须继续发出请求
101——客户要求服务器根据请求转换HTTP协议版本
200——交易成功
201——提示知道新文件的URL
202——接受和处理、但处理未完成
203——返回信息不确定或不完整
204——请求收到，但返回信息为空
205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件
206——服务器已经完成了部分用户的GET请求
300——请求的资源可在多处得到
301——删除请求数据
302——在其他地址发现了请求数据
303——建议客户访问其他URL或访问方式
304——客户端已经执行了GET，但文件未变化
305——请求的资源必须从服务器指定的地址得到
306——前一版本HTTP中使用的代码，现行版本中不再使用
307——申明请求的资源临时性删除
400——错误请求，如语法错误
401——请求授权失败
402——保留有效ChargeTo头响应
403——请求不允许
404——没有发现文件、查询或URl
405——用户在Request-Line字段定义的方法不允许
406——根据用户发送的Accept拖，请求资源不可访问
407——类似401，用户必须首先在代理服务器上得到授权
408——客户端没有在用户指定的饿时间内完成请求
409——对当前资源状态，请求不能完成
410——服务器上不再有此资源且无进一步的参考地址
411——服务器拒绝用户定义的Content-Length属性请求
412——一个或多个请求头字段在当前请求中错误
413——请求的资源大于服务器允许的大小
414——请求的资源URL长于服务器允许的长度
415——请求资源不支持请求项目格式
416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含If-Range请求头字段
417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求
500——服务器产生内部错误
501——服务器不支持请求的函数
502——服务器暂时不可用，有时是为了防止发生系统过载
503——服务器过载或暂停维修
504——关口过载，服务器使用另一个关口或服务来响应用户，等待时间设定值较长
505——服务器不支持或拒绝支请求头中指定的HTTP版本

## 8、

## 9、

## 10、

## 11、

## 12、

## 13、

## 14、

## 15、

## 17、

## 18、

## 19、

## 20、

## 21、

## 22、